#!/bin/bash

# node| port | neigh
# 1   | 1053 | 4
# 2   | 1063 | 5
# 3   | 1073 | 5
# 4   | 1083 | 7
# 5   | 1093 | 7
# 6   | 2003 | 5
# 7   | 2013 | 4
# 8   | 2023 | 4
# 9   | 2033 | 3
# 10  | 2043 | 2
# 11  | 2053 | 4
# 12  | 2063 | 3
# 13  | 2073 | 3
# 14  | 2083 | 3
# 15  | 2093 | 3

# Logger Port 1042
LOGGER="127.0.0.1:1042"

# Start logger process
cd Logger
go build loggerMain.go logger.go msg.go
gnome-terminal -e "./loggerMain" &
echo "logger started" 
# Start node processes
cd ../Nodes 
go build nodeMain.go node.go msg.go
# Start 15 nodes
gnome-terminal -e "./nodeMain "127.0.0.1:1053" $LOGGER "1" "127.0.0.1:1083" "127.0.0.1:2003" "127.0.0.1:2053" "127.0.0.1:2093" " 
gnome-terminal -e "./nodeMain "127.0.0.1:1063" $LOGGER "2" "127.0.0.1:1083" "127.0.0.1:1093" "127.0.0.1:2003" "127.0.0.1:2033" "127.0.0.1:2043" " 
gnome-terminal -e "./nodeMain "127.0.0.1:1073" $LOGGER "3" "127.0.0.1:1083" "127.0.0.1:1093" "127.0.0.1:2013" "127.0.0.1:2023" "127.0.0.1:2063" " 
gnome-terminal -e "./nodeMain "127.0.0.1:1083" $LOGGER "4" "127.0.0.1:1053" "127.0.0.1:1063" "127.0.0.1:1073" "127.0.0.1:1093" "127.0.0.1:2003" 
"127.0.0.1:2013" "127.0.0.1:2053" " 
gnome-terminal -e "./nodeMain "127.0.0.1:1093" $LOGGER "5" "127.0.0.1:1063" "127.0.0.1:1073" "127.0.0.1:1083" "127.0.0.1:2023" "127.0.0.1:2033" 
"127.0.0.1:2073" "127.0.0.1:2083" " 
gnome-terminal -e "./nodeMain "127.0.0.1:2003" $LOGGER "6" "127.0.0.1:1053" "127.0.0.1:1063" "127.0.0.1:1083" "127.0.0.1:2043" "127.0.0.1:2093" " 
gnome-terminal -e "./nodeMain "127.0.0.1:2013" $LOGGER "7" "127.0.0.1:1073" "127.0.0.1:1083" "127.0.0.1:2053" "127.0.0.1:2063" " 
gnome-terminal -e "./nodeMain "127.0.0.1:2023" $LOGGER "8" "127.0.0.1:1073" "127.0.0.1:1093" "127.0.0.1:2063" "127.0.0.1:2073" " 
gnome-terminal -e "./nodeMain "127.0.0.1:2033" $LOGGER "9" "127.0.0.1:1063" "127.0.0.1:1093" "127.0.0.1:2083" " 
gnome-terminal -e "./nodeMain "127.0.0.1:2043" $LOGGER "10" "127.0.0.1:1063" "127.0.0.1:2003" " 
gnome-terminal -e "./nodeMain "127.0.0.1:2053" $LOGGER "11" "127.0.0.1:1053" "127.0.0.1:1083" "127.0.0.1:2013" "127.0.0.1:2093" " 
gnome-terminal -e "./nodeMain "127.0.0.1:2063" $LOGGER "12" "127.0.0.1:1073" "127.0.0.1:2013" "127.0.0.1:2023" " 
gnome-terminal -e "./nodeMain "127.0.0.1:2073" $LOGGER "13" "127.0.0.1:1093" "127.0.0.1:2023" "127.0.0.1:2083" " 
gnome-terminal -e "./nodeMain "127.0.0.1:2083" $LOGGER "14" "127.0.0.1:1093" "127.0.0.1:2033" "127.0.0.1:2073" " 
gnome-terminal -e "./nodeMain "127.0.0.1:2093" $LOGGER "15" "127.0.0.1:1053" "127.0.0.1:2003" "127.0.0.1:2053" " 

#./nodeMain "127.0.0.1:1053" $LOGGER "1" "127.0.0.1:1083" "127.0.0.1:2003" "127.0.0.1:2053" "127.0.0.1:2093" & 
# ./nodeMain "127.0.0.1:1063" $LOGGER "2" "127.0.0.1:1083" "127.0.0.1:1093" "127.0.0.1:2003" "127.0.0.1:2033" "127.0.0.1:2043" &
# ./nodeMain "127.0.0.1:1073" $LOGGER "3" "127.0.0.1:1083" "127.0.0.1:1093" "127.0.0.1:2013" "127.0.0.1:2023" "127.0.0.1:2063" &
# ./nodeMain "127.0.0.1:1083" $LOGGER "4" "127.0.0.1:1053" "127.0.0.1:1063" "127.0.0.1:1073" "127.0.0.1:1093" "127.0.0.1:2003" "127.0.0.1:2013" "127.0.0.1:2053" &
# ./nodeMain "127.0.0.1:1093" $LOGGER "5" "127.0.0.1:1063" "127.0.0.1:1073" "127.0.0.1:1083" "127.0.0.1:2023" "127.0.0.1:2033" "127.0.0.1:2073" "127.0.0.1:2083" &
# ./nodeMain "127.0.0.1:2003" $LOGGER "6" "127.0.0.1:1053" "127.0.0.1:1063" "127.0.0.1:1083" "127.0.0.1:2043" "127.0.0.1:2093" &
# ./nodeMain "127.0.0.1:2013" $LOGGER "7" "127.0.0.1:1073" "127.0.0.1:1083" "127.0.0.1:2053" "127.0.0.1:2063" &
# ./nodeMain "127.0.0.1:2023" $LOGGER "8" "127.0.0.1:1073" "127.0.0.1:1093" "127.0.0.1:2063" "127.0.0.1:2073" &
# ./nodeMain "127.0.0.1:2033" $LOGGER "9" "127.0.0.1:1063" "127.0.0.1:1093" "127.0.0.1:2083" &
# ./nodeMain "127.0.0.1:2043" $LOGGER "10" "127.0.0.1:1063" "127.0.0.1:2003" &
# ./nodeMain "127.0.0.1:2053" $LOGGER "11" "127.0.0.1:1053" "127.0.0.1:1083" "127.0.0.1:2013" "127.0.0.1:2093" &
# ./nodeMain "127.0.0.1:2063" $LOGGER "12" "127.0.0.1:1073" "127.0.0.1:2013" "127.0.0.1:2023" &
# ./nodeMain "127.0.0.1:2073" $LOGGER "13" "127.0.0.1:1093" "127.0.0.1:2023" "127.0.0.1:2083" &
# ./nodeMain "127.0.0.1:2083" $LOGGER "14" "127.0.0.1:1093" "127.0.0.1:2033" "127.0.0.1:2073" &
# ./nodeMain "127.0.0.1:2093" $LOGGER "15" "127.0.0.1:1053" "127.0.0.1:2003" "127.0.0.1:2053" 

echo "nodes started"